- title(@person.official_name)

.grid_16
  %h1
    = @person.official_name
    - surround '(', ')' do
      = @person.current_role.try(:affiliation_fm)
  %hr

%aside.grid_4
  #left_nav
    = render_navigation(:level => 3)

.grid_12  
  .grid_6.alpha
    %h2 General Info

    .grid_2.alpha
      - if @person.photo_url
        = image_tag(@person.photo_url)
      - else
        = image_tag('missing.png')

    %ul.grid_4.omega
      - unless @person.birthday.blank?
        %li= "Born #{@person.birthday}"
      - unless @person.gender.blank?
        %li{:class => @person.gender} Gender: #{@person.gender}
      - unless @person.religion.blank?
        %li= "Religion: #{@person.religion}"
      - unless @person.website_one.blank?
        %li
          = link_to_with_domain("Website", @person.website_one)
      - unless @person.website_two.blank?
        %li
          = link_to_with_domain("Website", @person.website_two)
      - unless @person.webmail.blank?
        %li
          = link_to_with_domain("Web E-Mail", @person.webmail)
      - unless @person.email.blank?
        %li!= mail_to("E-Mail", @person.email, :encode => "javascript")
      - unless @person.youtube_id.blank?
        %li!= "Youtube: " + link_to(@person.youtube_id, @person.youtube_url)
  
  .grid_4
    %h2 Bio
    %small.quiet.span
      From the non-partisan
      = link_to("wikipedia", "http://en.wikipedia.org/wiki/#{@person.wiki_name}")
    %p
      = @person.bio_data

  .grid_2.omega
    .views
      This Person's Page Views&nbsp;&nbsp;&nbsp;
      Today - 3,456&nbsp;&nbsp;&nbsp;
      Past 30 Days - 67,987&nbsp;&nbsp;&nbsp;
      All-Time - 2,235,232&nbsp;&nbsp;&nbsp;
    .track
      Track this representative via RSS or e-mail
    .discuss
      Citizen Discussion Forum
    .contact
      Write this representative
    .support
      = link_to 'I support', '#'
      /
      = link_to 'I oppose', '#'
      this representative!
    .wiki
      Follow #{@person.full_name.possessive} campaign on RaceTracker

  %hr.push_top
  
  .grid_12.alpha
    %h2 Addresses
    %ul.addresses
      - if @person.addresses.size > 0
        - @person.addresses.each do |address|
          = render :partial => "shared/address", :locals => {:address => address}
      - else
        %p Sorry, we found no addresses.
  

  %hr.push_top

  .grid_12.alpha
    .grid_4.alpha
      %h2 Roles
      %p
        - @person.roles.each do |role|
          %div
            #{role.state.try(:name)} #{role.chamber.name} #{year_span(role.start_date, role.end_date)}
      - if @person.committees.size > 0
        %h2 Committees
        %p
          - @person.committees.each do |committee|
            %div
            = committee.type_fm
            = link_to(committee.name, committee_path(committee))
    .grid_4
      %h2 Votes
      - if @latest_roll_calls.size > 0
        %div
          %div
            %ul
              - @latest_roll_calls.each do |roll_call|
                - vote = roll_call.vote
                %li
                  = "#{roll_call.vote_type} on [#{vote.bill.bill_number}: #{vote.motion}] at #{vote.date}"
    
        %p
          != link_to("View All Votes", votes_person_path(@person))
      - else
        %p We have no voting history for #{@person.full_name}
  
  
    
    .grid_4.omega
      %h2!= sponsorship_vitals_for(@person)
    
    
  %hr.push_top
  
  .grid_12.alpha
    %h2 Contributions
    - if @person.has_contributions?
      .small.quiet.grid_24 From the non-partisan <a href="http://www.followthemoney.org/Institute/about_data.phtml"> Project Vote Smart</a>.
      %div.grid_3.alpha
        %h3
          Top List
        - @person.contributions.each do |c|
          .grid_4
            = c.business.business_name
          .grid_2.last
            = number_to_currency(c.amount)
    
      %div.grid_3
        %h3
          By Industry
        - @person.industry_contributions.each do |c|
          .grid_4
            = c.industry_name
          .grid_2.last
            = number_to_currency(c.amount)
    
      %div.grid_3
        %h3
          By Sector
        - @person.sector_contributions.each do |c|
          .grid_4
            = c.sector_name
          .grid_2.last
            = number_to_currency(c.amount)
    
      %div.grid_3.omega
        %h3
          By Business
        - @person.business_contributions.each do |c|
          .grid_4
            = c.business_name
          .grid_2.last
            = number_to_currency(c.amount)
    
    - else
      .grid_12.alpha
        No data is available for this Member at this time via FollowTheMoney.org. To inquire how you can help make this info available and ensure transparency in government, visit
        %a{:href => 'http://www.followthemoney.org/Contact/index.phtml?dvd=8'} here
        == .

  %hr.push_top


  .grid_12.alpha
    %h2 Ratings
    - unless @person.ratings.blank?
      .small.quiet.grid_24 From the non-partisan <a href="http://www.followthemoney.org/Institute/about_data.phtml"> Project Vote Smart</a>.
      %hr
      - @person.ratings.each do |rating|
        %div.grid_8
          = rating.special_interest_group.category.name
        %div.grid_8
          = link_to(rating.special_interest_group.name, sig_path(rating.special_interest_group))
        %div.grid_2
          = rating.timespan
        %div.grid_2
          = rating.rating
    - else
      %p.grid_12.alpha
        No data found for this Member at this time via Project Vote Smart. To inquire how you can help make this info available and ensure transparency in government, visit
        %a{:href => 'http://votesmart.org/program_donations_index.php'} here
