- content_for :head do
  = auto_discovery_link_tag(:atom, {:format => :atom}, {:title => "All Actions"})
  = auto_discovery_link_tag(:atom, {:action => 'major_actions', :format => :atom}, {:title => "Major Actions"})

- title("#{@bill.state.name} #{@bill.chamber.name} Bill #{@bill.bill_number}")

.grid_16
  %h1.grid_13.alpha= "#{@bill.state.name} #{@bill.chamber.name} Bill #{@bill.bill_number}"

  %hr


.grid_16.views
  = rand(100000)
  total views&nbsp;&nbsp;
  = rand(100)
  in the last 7 days&nbsp;&nbsp;
  = rand(1000)
  in the last month.

%hr.grid_16


  
%p.grid_16.summary= @bill.title



.grid_16
  %p
    %div
      = "Session: #{@bill.session.start_year} - #{@bill.session.end_year}"
      Track via RSS:
      = link_to "All actions", {:actions => 'all', :format => :atom}
      = link_to "Major actions", {:actions => 'major', :format => :atom}

  .grid_8.alpha
    %h2 Sponsors
    %p
      - @bill.sponsors.each do |sponsor|
        %div
          = link_to(sponsor.full_name, person_path(sponsor))
  .grid_8.omega
    - if @bill.versions.size > 0
      %h2 Versions

      %p
        - @bill.versions.each do |version|
          %div
            = link_to(version.name, version.url)


.grid_16.alpha
  - if @bill.major_actions.size > 0
    %h2 #{link_to "Major Actions", url_for(:actions => 'major'), :remote => true} | #{link_to "All Actions", url_for(:actions => 'all'), :remote => true}
    .grid_24.last
      #bill_actions= render :partial => 'actions_table', :locals => {:actions => @actions}

  - if @bill.votes.size > 0
    %h2 Votes
    %table.vote-summary
      %thead
        %tr
          %th Motion
          %th(colspan=2) Outcome (%)
      - @bill.votes.each do |vote|
        %tbody
          %td
            %h4= link_to("#{vote.motion}", vote_path(vote))
            %br
            .summary-line
              %span.voters= vote.total_count
              people voted on
              %span.vote_date= vote.date
          %td.vote-stats
            %span{:class => vote.passed? ? 'vote-passed' : ''}= vote.yes_frac.round
            &ndash;
            %span{:class => vote.passed? ? '' : 'vote-failed'}= vote.no_frac.round
            &ndash;
            %span= vote.other_frac.round
          %td.vote-bar
            %span{:class => "vote-yes-block", :style => "width: #{number_with_precision(vote.yes_frac)}%;"} &nbsp;
            %span{:class => "vote-no-block", :style => "width: #{number_with_precision(vote.no_frac)}%;"} &nbsp;
            %span{:class => "vote-other-block", :style => "width: #{number_with_precision(vote.other_frac)}%;"} &nbsp;

- if @bill.citations.size > 0
  %div.grid_16
    %h2 Citations
    %div.grid_6.alpha
      %h3 Google News
      - @bill.google_news_citations.each do |citation|
        %span
          = link_to citation.title, citation.url
          %div
            = citation.excerpt

    %div.grid_6
      %h3 Blogs
      - @bill.google_blog_citations.each do |citation|
        %span
          = link_to citation.title, citation.url
          %div
            = citation.excerpt

    %div.grid_4.omega
      %h3 Technorati
      = @bill.technorati_citations.each do |citation|
        %span
          = link_to citation.title, citation.url
          %div
            = citation.excerpt

%div.social
  %p Tweet this bill using the hashtags #{@bill.to_hashtags}
