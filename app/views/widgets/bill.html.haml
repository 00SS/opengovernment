= title('Create a custom Bill Status Widget')

.grid_7
  .widget_preview.grid_4.omega
    %h2 Live Preview of your widget
    #widgetPreview
      :javascript
        var testWidget = new OG.Widget({
          version: 1,
          type: 'bill_status',
          state: '#{current_place_subdomain}',
          bill: {
            session: '#{@hot_bills.first.session.to_param}',
            number: '#{@hot_bills.first.to_param}'
          },
          width: 'auto',
          preview: true,
          theme: {
            background: '#f9f9f9',
            color: '#555',
            header: '#333',
            links: '#333'
          }
        }).render();


.widget_config.grid_8.omega.alpha
  %h2 Customize your widget

  %form
    .bill_chooser
      #widgetBillData

      %label(for="widgetBill") Choose a popular bill:
      %select(id="widgetBill" class="widgetVar")
        - @hot_bills.each do |bill|
          %option{:'data-session' => bill.session.to_param, :'data-bill' => bill.to_param}= truncate(bill.title_fm, :length => 60)

      :javascript
        $('#widgetBill').change(function() {
          var el = $(this).find('option:selected');
          $('#widgetBillData').data('bill', el.data('bill'));
          $('#widgetBillData').data('session', el.data('session').toString());
        });

      %label(for="widgetBillLookup") Or lookup any bill:
      %input(type="text" id="widgetBillLookup")

    = render :partial => 'color_choosers'

    #dimensions

      %label(for='widgetWidth') Width:
      %input(type="text" maxlength="3" size="3" id="widgetWidth" class="widgetVar" value="250")
      %span.note (in px)
      %p.small 
        (width changes do not appear in the preview)

    .space

    #get_the_code
      %h2 Get the Code
      %textarea(id="embed-code")
