%html
  %head
    %script(src="http://maps.google.com/maps/api/js?sensor=false")
    :javascript
      function initialize() {
        var myLatlng = new google.maps.LatLng(#{@center.y},#{@center.x});
        var myOptions = {
          zoom: 10,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        var kmlLayer = new google.maps.KmlLayer('#{url_for({:only_path => false, :format => :kml})}');
        kmlLayer.setMap(map);
      }

  %body{:style => "margin:0px; padding:0px;", :onload => "initialize()"}
    %div#map_canvas{:style => "width:100%; height:100%"}
